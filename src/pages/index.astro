---
import Layout from '../layouts/Layout.astro';
import { sanityClient } from 'sanity:client';
import { PortableText } from 'astro-portabletext';

// Fetch homepage content and featured services
const [pageData, services, faqs] = await Promise.all([
  sanityClient.fetch(`
    *[_type == "page" && slug.current == "home"][0]{
      title,
      seo,
      hero,
      content,
      aiContext
    }
  `),
  sanityClient.fetch(`
    *[_type == "service"] | order(_createdAt desc)[0...2]{
      name,
      slug,
      shortDescription,
      features,
      "image": images[0]
    }
  `),
  sanityClient.fetch(`
    *[_type == "faq"] | order(priority desc)[0...3]{
      question,
      answer,
      category
    }
  `)
]);

// Fallback content if Sanity content isn't available yet
const defaultContent = {
  title: "Stop Losing $5k+ Epoxy Jobs to Competitors Online | Floorplay",
  seo: {
    metaTitle: "FloorPlay Agency - Lead Generation for Floor Coating Contractors",
    metaDescription: "The only no-nonsense marketing agency built for garage & basement flooring contractors. Stop losing $5k+ epoxy jobs to competitors online."
  }
};

const content = pageData || defaultContent;

// Image constants
const imgImage2 = "http://localhost:3845/assets/16b88758a3f19b45f534bf2bc205e26664404521.png";
const imgDivider = "http://localhost:3845/assets/5234c6adb3e005f5c06592e41b6fc5cb71a97964.svg";
---

<Layout 
  title={content.seo?.metaTitle || content.title}
  description={content.seo?.metaDescription}
>
  <!-- Background Image -->
  <div class="background-pattern"></div>

  <!-- Top Section -->
  <section class="top-section">
    <div class="container">
      <!-- Header -->
      <div class="header">
        <div class="logo-nav">
          <div class="logo">
            <h1>Floorplay</h1>
          </div>
          <nav class="nav">
            <a href="/services/flooring-contractors-seo" class="nav-link">Services</a>
            <a href="/free-audit" class="nav-link">Free Audit</a>
          </nav>
        </div>
        <div class="divider"></div>
        <div class="tagline">
          <p>Where Specialty Flooring Contractors Go to Grow</p>
        </div>
      </div>
      
      <!-- Hero Content -->
      <div class="hero-content">
        <h1 class="headline">Stop Losing $5k+ Epoxy Jobs to Competitors Online</h1>
        <p class="subheadline">
          Floorplay is the Only No-Nonsense Marketing Agency Built for Garage & Basement Flooring Contractors.
        </p>
        <div class="hero-cta">
          <a href="/free-audit" class="cta-button primary">
            Claim Your Free Epoxy Lead Audit
          </a>
          <p class="cta-subtitle">
            And see exactly how many $5k+ jobs you're losing to competitors online
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Value Proposition Section -->
  <section class="value-section">
    <div class="container">
      <p class="value-text">
        While other agencies spread thin across every contractor type, we exclusively serve epoxy, concrete garage flooring, and basement specialists. Result? We know exactly what makes homeowners choose YOU for their $5k+ flooring investment.
      </p>
    </div>
  </section>

  <!-- Problem Section -->
  <section class="problem-section">
    <div class="container">
      <h2 class="problem-headline">Are You Losing $5k+ Epoxy Jobs Every Month?</h2>
      <div class="problem-cards">
        <div class="problem-card">
          <p>Competitors rank #1 for 'epoxy garage floor [city]'</p>
        </div>
        <div class="problem-card">
          <p>You're stuck on page 2+ of Google searches</p>
        </div>
        <div class="problem-card">
          <p>Premium customers choose whoever they see first</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Solution Section -->
  <section class="solution-section">
    <div class="container">
      <h2 class="solution-headline">The Only Marketing Agency Built for Epoxy & Concrete Contractors</h2>
      <div class="solution-list">
        <ol>
          <li>
            <span class="list-label">Local Search Domination:</span>
            <span>"Rank #1 for 'epoxy garage floor [your city]'</span>
          </li>
          <li>
            <span class="list-label">Qualified Lead Generation:</span>
            <span>"5-8 premium jobs monthly, not tire-kickers"</span>
          </li>
          <li>
            <span class="list-label">Industry Expertise:</span>
            <span>"We speak garage flooring, not generic contractor"</span>
          </li>
        </ol>
      </div>
      <div class="solution-cta">
        <a href="/free-audit" class="cta-button secondary">
          Claim Your Free Epoxy Lead Audit
        </a>
      </div>
    </div>
  </section>

  <!-- Footer Section -->
  <section class="footer-section">
    <div class="container">
      <h3 class="footer-logo">Floorplay</h3>
      <p class="footer-text">All rights reserved.</p>
    </div>
  </section>
</Layout>

<style>
  /* Background Pattern */
  .background-pattern {
    position: absolute;
    top: 1px;
    left: -194px;
    width: 1900px;
    height: 1065px;
    background-image: url('http://localhost:3845/assets/16b88758a3f19b45f534bf2bc205e26664404521.png');
    background-size: cover;
    background-position: center;
    opacity: 0.05;
    mix-blend-mode: color-burn;
    transform: scaleY(-1);
    z-index: -1;
  }

  /* Container */
  .container {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  /* Top Section */
  .top-section {
    background: #ffffff;
    padding: 72px 0;
    position: relative;
    z-index: 1;
  }

  /* Header */
  .header {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 80px;
  }

  .logo-nav {
    display: flex;
    justify-content: space-between;
    align-items: end;
  }

  .logo h1 {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    font-size: 32px;
    letter-spacing: 1.6px;
    margin: 0;
    line-height: 0.831;
    color: #000000;
  }

  .nav {
    display: flex;
    gap: 24px;
  }

  .nav-link {
    font-family: 'Sora', sans-serif;
    font-weight: 700;
    font-size: 20px;
    color: #6bb77e;
    text-decoration: none;
    letter-spacing: 1px;
    line-height: 0.831;
  }

  .nav-link:hover {
    opacity: 0.8;
  }

  .divider {
    height: 1px;
    background: url('http://localhost:3845/assets/5234c6adb3e005f5c06592e41b6fc5cb71a97964.svg') repeat-x;
    width: 100%;
  }

  .tagline {
    text-align: right;
  }

  .tagline p {
    font-family: 'Sora', sans-serif;
    font-weight: 400;
    font-size: 16px;
    color: #000000;
    letter-spacing: -0.32px;
    line-height: 1.3;
    max-width: 250px;
    margin: 0 0 0 auto;
  }

  /* Hero Content */
  .hero-content {
    display: flex;
    flex-direction: column;
    gap: 32px;
  }

  .headline {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    font-size: 56px;
    color: #000000;
    letter-spacing: -1.12px;
    line-height: 1.2;
    margin: 0;
  }

  .subheadline {
    font-family: 'Sora', sans-serif;
    font-weight: 400;
    font-size: 28px;
    color: #000000;
    letter-spacing: -0.56px;
    line-height: 1.3;
    margin: 0;
  }

  .hero-cta {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .cta-button {
    padding: 24px 32px;
    text-decoration: none;
    font-family: 'Sora', sans-serif;
    font-weight: 700;
    font-size: 18px;
    letter-spacing: -0.36px;
    line-height: 1.3;
    transition: all 0.3s ease;
    white-space: nowrap;
  }

  .cta-button.primary {
    background: #6bb77e;
    color: #000000;
  }

  .cta-button.primary:hover {
    background: #5fa36f;
    transform: translateY(-2px);
  }

  .cta-button.secondary {
    background: #ffffff;
    color: #000000;
  }

  .cta-button.secondary:hover {
    background: #f8f9fa;
    transform: translateY(-2px);
  }

  .cta-subtitle {
    font-family: 'Sora', sans-serif;
    font-weight: 400;
    font-size: 16px;
    color: #000000;
    letter-spacing: -0.32px;
    line-height: 1.3;
    margin: 0;
    max-width: 329px;
  }

  /* Value Section */
  .value-section {
    background: #6bb77e;
    padding: 60px 0;
    margin-top: 0;
  }

  .value-text {
    font-family: 'Sora', sans-serif;
    font-weight: 400;
    font-size: 38px;
    color: #000000;
    letter-spacing: -0.76px;
    line-height: 1.4;
    margin: 0;
  }

  /* Problem Section */
  .problem-section {
    background: #6bb77e;
    padding: 50px 0;
    margin-top: 0;
  }

  .problem-headline {
    font-family: 'Bricolage Grotesque', sans-serif;
    font-weight: 700;
    font-size: 47px;
    color: #000000;
    letter-spacing: -0.94px;
    line-height: 1.2;
    margin: 0 0 12px 0;
    font-variation-settings: 'opsz' 14, 'wdth' 100;
  }

  .problem-cards {
    display: flex;
    gap: 24px;
    margin-top: 12px;
    width: 100%;
  }

  .problem-card {
    flex: 1;
    background: #000000;
    padding: 24px;
    min-height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .problem-card p {
    font-family: 'Sora', sans-serif;
    font-weight: 600;
    font-size: 24px;
    color: #ffffff;
    letter-spacing: -0.48px;
    line-height: 1.4;
    margin: 0;
    text-align: center;
  }

  /* Solution Section */
  .solution-section {
    background: #6bb77e;
    padding: 50px 0;
    margin-top: 0;
  }

  .solution-headline {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    font-size: 38px;
    color: #000000;
    letter-spacing: -0.76px;
    line-height: 1.4;
    margin: 0 0 12px 0;
  }

  .solution-list {
    margin: 12px 0 16px 0;
  }

  .solution-list ol {
    font-family: 'Sora', sans-serif;
    font-weight: 400;
    font-size: 24px;
    color: #000000;
    letter-spacing: -0.48px;
    line-height: 1.4;
    margin: 0;
    padding-left: 24px;
  }

  .solution-list li {
    margin-bottom: 24px;
    line-height: 1.4;
  }

  .solution-list li:last-child {
    margin-bottom: 0;
  }

  .list-label {
    font-weight: 700;
  }

  .solution-cta {
    margin-top: 40px;
  }

  /* Footer Section */
  .footer-section {
    background: #000000;
    padding: 112px 0;
  }

  .footer-logo {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    font-size: 38px;
    color: #ffffff;
    letter-spacing: -0.76px;
    line-height: 1.4;
    margin: 0 0 12px 0;
  }

  .footer-text {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 400;
    font-size: 20px;
    color: #ffffff;
    letter-spacing: -0.4px;
    line-height: 1.4;
    margin: 0;
  }

  /* Mobile Responsive */
  @media (max-width: 768px) {
    .background-pattern {
      display: none;
    }

    .top-section {
      padding: 40px 0;
    }
    
    .header {
      margin-bottom: 40px;
    }
    
    .logo-nav {
      flex-direction: column;
      gap: 16px;
      align-items: center;
    }
    
    .logo h1 {
      font-size: 28px;
    }
    
    .nav {
      gap: 16px;
    }
    
    .nav-link {
      font-size: 18px;
    }
    
    .tagline {
      text-align: center;
    }
    
    .tagline p {
      margin: 0 auto;
      max-width: none;
    }
    
    .headline {
      font-size: 36px;
      letter-spacing: -0.72px;
    }
    
    .subheadline {
      font-size: 22px;
      letter-spacing: -0.44px;
    }
    
    .hero-cta {
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
    }
    
    .cta-button {
      padding: 20px 28px;
      font-size: 16px;
    }
    
    .cta-subtitle {
      font-size: 14px;
      max-width: none;
    }

    .value-text {
      font-size: 28px;
      letter-spacing: -0.56px;
    }

    .problem-headline {
      font-size: 32px;
      letter-spacing: -0.64px;
    }

    .problem-cards {
      flex-direction: column;
      gap: 16px;
    }

    .problem-card {
      min-height: 80px;
    }

    .problem-card p {
      font-size: 20px;
      letter-spacing: -0.4px;
      text-align: center;
    }

    .solution-headline {
      font-size: 28px;
      letter-spacing: -0.56px;
    }

    .solution-list ol {
      font-size: 18px;
      letter-spacing: -0.36px;
    }

    .footer-section {
      padding: 60px 0;
    }

    .footer-logo {
      font-size: 28px;
      letter-spacing: -0.56px;
    }

    .footer-text {
      font-size: 16px;
      letter-spacing: -0.32px;
    }
  }
</style>